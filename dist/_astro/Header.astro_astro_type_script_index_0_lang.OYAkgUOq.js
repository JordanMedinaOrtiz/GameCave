const f={articles:[{id:"1",nombre:"Halo Infinite",price:999},{id:"2",nombre:"F1 24",price:1099},{id:"3",nombre:"Assassins Creed Shadows Gold Edition",price:1999},{id:"4",nombre:"Little Nightmares III",price:899},{id:"5",nombre:"Silent Hill 2",price:1299},{id:"6",nombre:"Metal Gear Solid Delta Snake Eater",price:1299},{id:"7",nombre:"Grand Theft Auto V",price:999},{id:"8",nombre:"Dragon Ball Sparking Zero",price:1199}]},v=document.querySelectorAll('[data-accion="open-car"]'),y=document.querySelectorAll('[data-accion="close-car"]');document.querySelectorAll('[data-accion="delate-item-car"]');const L=document.querySelectorAll('[data-accion="car-btn-buy"]'),u=document.querySelector(".car-alert-no-articles"),g=document.querySelector(".car-container-btn-back"),h=document.querySelector(".car-container-total"),o=document.getElementById("car"),S=document.getElementById("add-to-cart"),p=document.getElementById("article"),b=new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}),l=document.getElementById("notification");let r=[];const d=()=>{localStorage.setItem("car",JSON.stringify(r))},E=()=>{const t=localStorage.getItem("car");t&&(r=JSON.parse(t))};E();const m=()=>{o.classList.remove("hidden"),o.querySelectorAll(".car-article").forEach(e=>e.remove());let c=0;r.length<1?(u.classList.remove("hidden"),g.classList.remove("hidden"),h.classList.add("hidden")):(u.classList.add("hidden"),g.classList.add("hidden"),h.classList.remove("hidden"),r.forEach(e=>{f.articles.forEach(i=>{i.id===e.id&&(e.price=i.price,c+=i.price*e.amount)});const n=`
                <div class="flex gap-5 items-center car-article-info">
                    <img src="${e.img}" alt="" class="w-16 rounded-sm car-thumb" />
                    <div>
                        <p class="font-semibold mb-1 car-article-name">
                            <span class="font-normal car-article-amount">${e.amount} x </span>${e.name}
                        </p>
                    </div>
                </div>
                <div class="flex flex-col items-end justify-center car-article-container-price">
                    <button class="bg-none border-none cursor-pointer mb-2 text-txt-200 transition-all duration-300 hover:text-red-700 hover:bg-white rounded-md car-btn-delate-item" data-accion="delate-item-car">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm3.354 4.646L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 1 1 .708-.708z"/>
                        </svg>
                    </button>
                    <p class="text-lg car-article-price">${b.format(e.price*e.amount)}</p>
                </div>`,a=document.createElement("div");a.classList.add("car-article","flex","justify-between","gap-5","pb-5","border-b","border-bg"),a.innerHTML=n,o.querySelector(".car-body").appendChild(a)})),o.querySelector(".car-total").innerText=b.format(c)};v.forEach(t=>{t.addEventListener("click",c=>{m()})});y.forEach(t=>{t.addEventListener("click",c=>{o.classList.add("hidden")})});S.addEventListener("click",t=>{const c=p.dataset.articleId,e=p.querySelector(".article--name").innerText,n=1;let a=document.querySelector(".article-thumb-img").src;if(r.length>0){let i=!1;r.forEach(s=>{s.id===c&&s.name===e&&(s.amount+=n,i=!0)}),i||r.push({id:c,name:e,amount:n,img:a})}else r.push({id:c,name:e,amount:n,img:a});d(),l.querySelector("img").src=a,l.classList.add("md:right-20","opacity-100","max-md:right-2"),setTimeout(()=>{l.classList.remove("md:right-20","opacity-100","max-md:right-2")},5e3)});o.addEventListener("click",t=>{if(t.target.closest("button")?.dataset.accion==="delate-item-car"){const c=t.target.closest(".car-article"),e=[...o.querySelectorAll(".car-article")].indexOf(c);r=r.filter((n,a)=>{if(a!==e)return n}),d(),m()}});L.forEach(t=>{t.addEventListener("click",c=>{console.log("Enviando peticiÃ³n de compra!"),r=[],d(),m()})});document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".nav-links"),c=document.querySelector(".menu-icon");c.addEventListener("click",()=>{const e=c.getAttribute("name")==="menu";c.setAttribute("name",e?"close":"menu"),t.classList.toggle("hidden")})});
